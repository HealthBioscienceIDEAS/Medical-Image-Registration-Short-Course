<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Medical-Image-Registration-Short-Course: A Practical Introduction to Working with Medical Image Data</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="manifest" href="../site.webmanifest"><link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav IDEAS"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="IDEAS" src="../assets/images/IDEAS-logo.svg"><abbr class="badge badge-light" title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught." style="background-color: #FF4955; border-radius: 5px">
          <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link" style="color: #000">
            <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
            Pre-Alpha
          </a>
          <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
        </abbr>
        
      </div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../itksnap.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav IDEAS" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="IDEAS" src="../assets/images/IDEAS-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Medical-Image-Registration-Short-Course
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Medical-Image-Registration-Short-Course
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Medical-Image-Registration-Short-Course
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 0%" class="percentage">
    0%
  </div>
  <div class="progress IDEAS">
    <div class="progress-bar IDEAS" role="progressbar" style="width: 0%" aria-valuenow="0" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../itksnap.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        1. A Practical Introduction to Working with Medical Image Data
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#medical-imaging-data">Medical Imaging Data</a></li>
<li><a href="#visualisation-of-volumetric-data-with-itk-snap">Visualisation of volumetric data with ITK-SNAP</a></li>
<li><a href="#viewing-and-understanding-dicom-data">Viewing and understanding DICOM data</a></li>
<li><a href="#viewing-and-understanding-the-nifti-header-with-nibabel">Viewing and understanding the NifTi header with NiBabel</a></li>
<li><a href="#modifying-nifti-images-and-headers-with-nibabel">Modifying <code>NifTi</code> images and headers with Nibabel</a></li>
<li><a href="#references">References</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="excthreesteps.html">2. Demons Image Registration</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="../instructor/aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/excthreesteps.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="../instructor/excthreesteps.html" rel="next">
          Next: Demons Image... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>A Practical Introduction to Working with Medical Image Data</h1>
        <p>Last updated on 2024-06-18 |
        
        <a href="https://github.com/HealthBioscienceIDEAS/Medical-Image-Registration-Short-Course/edit/main/episodes/itksnap.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can we visualize volumetric data?</li>
<li>How do locations in an image get mapped to real-world
coordinates?</li>
<li>How can we register different types of images together using
ITK-SNAP?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Describe the structure of medical imaging data and popular formats
(DICOM and NifTi)</li>
<li>Discover and display medical imaging data in ITK-SNAP</li>
<li>Demonstrate how to convert between different medical image
formats</li>
<li>Inspecting the NifTi header with <code>nibabel</code>
</li>
<li>Manipulate image data (cropping images) with <code>nibabel</code>
and learn how it is displayed on screen with ITK-SNAP</li>
</ul></div>
</div>
</div>
</div>
</div>
<section id="medical-imaging-data"><h2 class="section-heading">Medical Imaging Data<a class="anchor" aria-label="anchor" href="#medical-imaging-data"></a>
</h2>
<hr class="half-width"><p>In these exercises we will be working with real-world medical imaging
data from the Cancer Imaging Archive (TCIA).</p>
<div class="section level3">
<h3 id="the-cancer-imaging-archive-tcia">The Cancer Imaging Archive (TCIA)<a class="anchor" aria-label="anchor" href="#the-cancer-imaging-archive-tcia"></a></h3>
<p>The Cancer Imaging Archive (TCIA) is a resource of public datasets
hosts a large archive of medical images of cancer accessible for public
download.<br>
We are using CT Ventilation as a Functional Imaging Modality for Lung
Cancer Radiotherapy (also known as
<code>CT-vs-PET-Ventilation-Imaging dataset</code>) from <a href="https://www.cancerimagingarchive.net/collection/ct-vs-pet-ventilation-imaging/" class="external-link">TCIA</a>.
The CT-vs-PET-Ventilation-Imaging collection is distributed under the
Creative Commons Attribution 4.0 International License (<a href="https://creativecommons.org/licenses/by/4.0/" class="external-link uri">https://creativecommons.org/licenses/by/4.0/</a>). The
<code>CT-vs-PET-Ventilation-Imaging</code> dataset contains 20 lung
cancer patients underwent exhale/inhale breath hold CT (BHCT),
free-breathing four-dimensional CT (4DCT) and Galligas PET ventilation
scans in a single session on a combined 4DPET/CT scanner.</p>
<p>We recomend using the BHCT scans for participants
<code>CT-PET-VI-02</code> and <code>CT-PET-VI-03</code> showing very
little motion between inhale and exhale (for PET scan and accompanying
CT scan), and BHCT scans for participants <code>CT-PET-VI-05</code> and
<code>CT-PET-VI-07</code> (the inhale and exhale CT scans), where 05 has
a different number of slices between the inhale and exhale:</p>
<ul><li>CT-PET-VI-02</li>
</ul><div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">CT-PET-VI-02$</span> tree <span class="at">-d</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">└──</span> 05-28-1996-RTRTRespLowBreathRateRNS Adult-05441</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="ex">├──</span> 3.000000-CT Lung  3.0  B31f-61322</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="ex">├──</span> 4.000000-Galligas Lung-03537</span></code></pre>
</div>
<ul><li>CT-PET-VI-03</li>
</ul><div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">/CT-PET-VI-03$</span> tree <span class="at">-d</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="ex">├──</span> 06-25-1996-RTRTRespLowBreathRateRNS Adult-43080</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="ex">│  </span> ├── 3.000000-CT Lung  3.0  B31f-08354</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="ex">│  </span> └── 4.000000-Galligas Lung-15379</span></code></pre>
</div>
<ul><li>CT-PET-VI-05</li>
</ul><div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">CT-PET-VI-05$</span> tree <span class="at">-d</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="ex">└──</span> 12-10-1996-RTRTRespLowBreathRateRNS Adult-37585</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    <span class="ex">├──</span> 5.000000-Thorax Insp  2.0  B70f-45546</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="ex">├──</span> 7.000000-Thorax Exp  2.0  B70f-31579</span></code></pre>
</div>
<ul><li>CT-PET-VI-07</li>
</ul><div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">/CT-PET-VI-07$</span> tree <span class="at">-d</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="ex">└──</span> 02-14-1997-RTRTRespLowBreathRateRNS Adult-80512</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="ex">├──</span> 5.000000-Thorax Insp  2.0  B70f-20440</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="ex">├──</span> 7.000000-Thorax Exp  2.0  B70f-03567</span></code></pre>
</div>
<p>Refer to <code>Summary and Setup</code> section for further details
on CT-vs-PET-Ventilation-Imaging dataset.</p>
<p>For examples in this episode, we are going to use DICOM data
“CT-PET-VI-02/3.000000-CT Lung 3.0 B31f-61322” but others can be
used!</p>
<figure><img src="../fig/CT-PET-VI-02.png" alt="Figure. CT-PET-VI-02 dataset" class="figure mx-auto d-block"><div class="figcaption">Figure. CT-PET-VI-02 dataset</div>
</figure><p>Notes</p>
<pre class="callout"><code>1. Data may require extensive cleaning and pre-processing before it is suitable to be used.
2. When using open datasets that contain images of humans, such as those from TCIA, for your own research, you will still need to get ethical approval (as you do for any non-open datasets you use).
   This can usually be obtained from the local ethics committee (both Medical Physics and Computer Science have their own local ethics committee) or from UCL central ethics if your department does not have one.
3. Although there are many formats that medical imaging data can come in, we are going to focus on DICOM and NifTi as they are two of the most common formats.
Most data that comes from a hospital will be in DICOM format, whereas NifTi is a very popular format in the medical image analysis community.</code></pre>
</div>
<div class="section level3">
<h3 id="dicom-format">DICOM format<a class="anchor" aria-label="anchor" href="#dicom-format"></a></h3>
<p>Digital Imaging and Communications in Medicine (DICOM) is a technical
standard for the digital storage and transmission of medical images and
related information. While DICOM images typically have a separate file
for every slice, more modern DICOM images can come with all slices in a
single file.</p>
<p>If you look at the data
<code>3.000000-CT Lung  3.0  B31f-61322</code> you will see there are
175 individual files corresponding to 175 slices in the volume. In
addition to the image data for each slice, each file contains a header
which can contain an extensive amount of extra information relating to
the scan and subject.</p>
<p>In a clinical setting this will include patient identifiable
information such as their name, address, and other relevant details.
Such information should be removed before the data is transferred from
the clinical network for use in research. If you ever discover patient
identifiable information in the header of data you are using you should
immediately alert your supervisor, manager or collaborator</p>
<p>The majority of the information in the DICOM header is not directly
useful for typical image processing and analysis tasks. Furthermore,
there are complicated ‘links’ (provided by unique identifiers, UIDs)
between the DICOM headers of different files belonging to the same scan
or subject. Together with DICOM routinely storing each slice as a
separate files, it makes processing an entire imaging volume stored as
DICOM format rather cumbersome, and the extra housekeeping required
could lead to a greater chance of an error being made. Therefore, a
common first step of any image processing pipeline is to convert the
DICOM image to a more suitable format such as <code>NifTi</code>.
Generally, most conversions go from DICOM to NIfTI. There are scenarios
when you might want to convert from NIfTI <strong>back</strong> to
DICOM, for example, if you need to import them into a clinical system
that only works with DICOM.</p>
<p>Notes</p>
<pre class="callout"><code>Converting images back to DICOM such that they are correctly interpreted by a clinical system can be very tricky and requires a good understanding of the DICOM standard. 
More information on the DICOM standard can be found here: https://www.dicomstandard.org</code></pre>
</div>
<div class="section level3">
<h3 id="nifti-format">NifTi format<a class="anchor" aria-label="anchor" href="#nifti-format"></a></h3>
<p>The Neuroimaging Informatics Technology Initiative (NIfTI) image
format are usually stored as a single file containing the imaging data
and header information. While the NifTI file format was originally
developed by the neuroimaging community it is not specific to
neuroimaging and is now widely used for many different medical imaging
applications outside of the brain. During these exercises you will learn
about some of the key information stored in the NifTi header.</p>
<p>NifTI files can also store the header and image data in separate
files but this is not very common. For more information, please see
Anderson Winkler’s blog on the <a href="https://brainder.org/2012/09/23/the-nifti-file-format/" class="external-link">NIfTI-1</a>
and<a href="https://brainder.org/2015/04/03/the-nifti-2-file-format/" class="external-link">NIfTI-2</a>
formats.</p>
</div>
</section><section id="visualisation-of-volumetric-data-with-itk-snap"><h2 class="section-heading">Visualisation of volumetric data with ITK-SNAP<a class="anchor" aria-label="anchor" href="#visualisation-of-volumetric-data-with-itk-snap"></a>
</h2>
<hr class="half-width"><div class="section level3">
<h3 id="getting-started-with-itk-snap">Getting Started with ITK-SNAP<a class="anchor" aria-label="anchor" href="#getting-started-with-itk-snap"></a></h3>
<div class="section level4">
<h4 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a></h4>
<p>ITK-SNAP started in 1999 with SNAP (SNake Automatic Partitioning) and
developed by Paul Yushkevich with the guidance of Guido Gerig. ITK-SNAP
is open-source software distributed under the GNU General Public
License. ITK-SNAP is written in C++ and it leverages the Insight
Segmentation and Registration Toolkit (ITK) library. See
<code>Summary and Setup</code> section for requirements and installation
of ITK-SNAP</p>
</div>
</div>
<div class="section level3">
<h3 id="itk-snap-application">ITK-SNAP application<a class="anchor" aria-label="anchor" href="#itk-snap-application"></a></h3>
<p>ITK-SNAP application shows three orthogonal slices and a fourth
window for three-dimensional view segmentation.</p>
<figure><img src="../fig/itk-snap-main-window.svg" alt="Figure. ITK-SNAP main window" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP main window</div>
</figure></div>
</section><section id="viewing-and-understanding-dicom-data"><h2 class="section-heading">Viewing and understanding DICOM data<a class="anchor" aria-label="anchor" href="#viewing-and-understanding-dicom-data"></a>
</h2>
<hr class="half-width"><p>We are using CT Lung DICOM dataset from <code>CT-PET-VI-02</code>:
“3.000000-CT Lung 3.0 B31f-61322 [175 items, totalling 92.4 MB]”.</p>
<div class="section level3">
<h3 id="opening-and-viewing-dicom-images">Opening and Viewing DICOM images<a class="anchor" aria-label="anchor" href="#opening-and-viewing-dicom-images"></a></h3>
<ul><li><strong>Open ITK-SNAP application</strong></li>
<li>
<strong>Load inhale scan using file browser</strong>
<ul><li>Open the itk-snap application. If you have used it before it will
display recent images when you open it, and you can select one of these
to open it.</li>
</ul>
If the image you want to open is not listed under recent images, you can
open it either by clicking the ‘Open Image…’ button at the bottom right
of the window, or File-&gt;Open Main Image. When you do this a small
window opens where you can enter the path of the file you want to open,
or click Browse in your file explorer (exFinder in Mac and nautilus in
Ubuntu) to open a file browser (for instance, “3.000000-CT Lung 3.0
B31f-61322”). Do this and select the first slice from the Inhale_BH_CT
folder, which is called 1-001.dcm. The set the File Format to DICOM
Image Series and then click <code>Next</code>. You will then be asked to
Select DICOM series to open, but as this folder only includes one series
you can just click <code>Next</code>. Click <code>Finish</code>
</li>
</ul><figure><img src="../fig/itk-snap-opening-dicoms.svg" alt="Figure. ITK-SNAP opening image file" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP opening image file</div>
</figure><figure><img src="../fig/itk-snap-viewing-dicoms.svg" alt="Figure. ITK-SNAP main window" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP main window</div>
</figure></div>
<div class="section level3">
<h3 id="navigating-dicom-images">Navigating DICOM images<a class="anchor" aria-label="anchor" href="#navigating-dicom-images"></a></h3>
<p>Here, we provide instructions for handling multiple DICOM images,
applying overlays, viewing image information, and using color maps in
ITK-SNAP.</p>
<div class="section level4">
<h4 id="navigate-around-image-see-intensity-value-and-adjust-intensity-window">Navigate around image, see intensity value, and adjust intensity
window<a class="anchor" aria-label="anchor" href="#navigate-around-image-see-intensity-value-and-adjust-intensity-window"></a></h4>
<ul><li>To navigate around the image, i.e. change the displayed slices, you
can left clicking in the displayed slices, using the mouse wheel, or the
slider next to the displayed slices.</li>
<li>To zoom, you can use the right mouse button (or control + button 1),
and pan using the centre mouse button (or alt + button 1).</li>
</ul><figure><img src="../fig/itk-snap-cursor-inspector.png" alt="Figure. ITK-SNAP cursor inspector" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP cursor inspector</div>
</figure><ul><li>
<strong>Load additional image using exhale scan by drag and
drop</strong>
<ul><li>Images can also be opened by simply dragging them on to the itksnap
window. In a file explorer (Finder in Mac) go to the exhale_BH_CT folder
and drag any of the dicom files on to the itksnap window. A small window
will pop up asking What should itksnap do with this image? If you select
Load as Main Image it will replace the current image. Instead select
Load as Additional Image - this will enable easy comparison of the two
images.</li>
</ul></li>
</ul><figure><img src="../fig/itk-snap-additional-image.svg" alt="Figure. ITK-SNAP additional image" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP additional image</div>
</figure></div>
<div class="section level4">
<h4 id="using-thumbnails-to-see-image-differences">Using thumbnails to see image differences<a class="anchor" aria-label="anchor" href="#using-thumbnails-to-see-image-differences"></a></h4>
<ul><li>Once the second image is loaded you will see two thumbnails in the
top corner of each slice display</li>
<li>Click on these to swap the displayed slices from one image to the
other - this will enable you to easily see the similarities and
differences between the images.</li>
<li>You will also see that both images now appear in the Cursor
Inspector, where you can see the intensity value at the cursor for both
images.</li>
<li>You can also change the displayed image by clicking on it in the
Cursor Inspector</li>
</ul><figure><img src="../fig/itk-snap-thumbnails.png" alt="Figure. ITK-SNAP thumbnails" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP thumbnails</div>
</figure></div>
<div class="section level4">
<h4 id="colour-overlay">Colour overlay<a class="anchor" aria-label="anchor" href="#colour-overlay"></a></h4>
<ul><li>In some cases you may want to display an image as a colour overlay
on top of another image, e.g. displaying a PET image overlaid on the
corresponding CT.</li>
<li>
<strong>Load Primary Image</strong>:
<ul><li>Open your primary DICOM series of the <code>CT_for_PET</code> image
either using the drag and drop method or
<code>File-&gt;Open Image</code> as described above.</li>
<li>This time select Load as Main Image. This will load in the new image
replacing the two that were previously loaded.</li>
<li>In some cases you may want to display an image as a colour overlay
on top of another image, e.g. displaying a PET image overlaid on the
corresponding CT. Load the CT_for_PET image either using the drag and
drop method or File-&gt;Open Image as described above This time select
Load as Main Image. This will load in the new image replacing the two
that were previously loaded.</li>
</ul></li>
</ul><figure><img src="../fig/itk-snap-colour-overlay.svg" alt="Figure. ITK-SNAP thumbnails" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP thumbnails</div>
</figure></div>
<div class="section level4">
<h4 id="colour-overlay-as-a-semi-transparent-overlay">Colour overlay as a semi-transparent overlay<a class="anchor" aria-label="anchor" href="#colour-overlay-as-a-semi-transparent-overlay"></a></h4>
<ul><li>To load the image as a colour overlay you need to use File-&gt;Add
Another Image… (e.g.,
<code>5.000000-Thorax Insp  2.0  B70f-29873</code>).</li>
<li>Click on Browse and select any one of the files in the PET folder
(e.g., <code>7.000000-Thorax Exp  2.0  B70f-73355</code>).</li>
<li>Make sure File Format is DICOM Image Series (it should be). Click
Next and then Next again.</li>
<li>When the image has loaded select As a semi-transparent overlay. you
can also set the overlay color map here - select Hot from the dropdown
menu and click Next.</li>
<li>The image summary will then be displayed, along with a warning about
possible loss of precision (which can be ignored). click Finish</li>
</ul><figure><img src="../fig/itk-snap-semi-transparent-overlay.svg" alt="Figure. ITK-SNAP semi-transparent overlays" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP semi-transparent overlays</div>
</figure></div>
</div>
<div class="section level3">
<h3 id="loading-multiple-dicom-images-as-separate-images">Loading Multiple DICOM Images as Separate Images<a class="anchor" aria-label="anchor" href="#loading-multiple-dicom-images-as-separate-images"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>Open the First DICOM Series</strong>:
<ul><li>Follow the steps above to load and view the first DICOM series.</li>
</ul></li>
<li>
<strong>Open the Second DICOM image in a New Window</strong>:
<ul><li>Go to <code>File</code> &gt; <code>New itksnap Window</code>.</li>
<li>Select <code>Open DICOM Series</code> and choose the second DICOM
series.</li>
<li>This will open the second series in a separate ITK-SNAP window.</li>
<li>This can be repeated for multiple DICOM series.</li>
</ul></li>
</ol><figure><img src="../fig/new-itk-snap-window.png" alt="Figure. ITK-SNAP new window" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP new window</div>
</figure></div>
<div class="section level3">
<h3 id="layer-inspector-tools">Layer inspector tools<a class="anchor" aria-label="anchor" href="#layer-inspector-tools"></a></h3>
<ul><li><p>Load <code>3.000000-CT Lung  3.0  B31f-61322</code> and
<code>4.000000-Galligas Lung-03537</code> from CT-PET-VI-02, using hot
semi-transparency (as shown above).</p></li>
<li><p>Go to <code>Tools-&gt;Layer Inspector</code>. This opens the
Image Layer Inspector window. you will see the two images on the left,
and five tabs along the top of the window.</p></li>
<li><p>PET image appears in Cursor Inspector (called Galligas Lung) in
italic and CT image as CT Lung in bold.</p></li>
<li>
<p><strong>The General tab</strong> displays the filename and the
nickname for the selected image.</p>
<ul><li>The Nickname can be edited. For the PET image the general tab also
displays a slider to set the opacity, and the option to display it as a
separate image or semi-transparent overlay.</li>
</ul></li>
</ul><figure><img src="../fig/itk-snap-layer-inspector-general-tab.png" alt="Figure. ITK-SNAP: Layer inspector with general tab" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP: Layer inspector with general
tab</div>
</figure><ul><li>
<strong>The Contrast tab</strong> enables you to adjust how the
image intensities are displayed for the different images. e.g. select
the lung image and set the maximum value to 1000 (push enter after
typing the number) and this will make the structures in the lung easier
to see.</li>
</ul><figure><img src="../fig/itk-snap-layer-inspector-contrast-tab.png" alt="Figure. ITK-SNAP: Layer inspector with contrast tab" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP: Layer inspector with contrast
tab</div>
</figure><ul><li>
<strong>The color map tab</strong> can be used to select and
manipulate the colour map
<ul><li>One of the key elements of an imaging viewer is to provide different
means to map those values into grey scales or different colors.</li>
<li>We will show you how to apply different color maps or lookup tables
to your data and how this affects how the images are presented to the
user.</li>
</ul><ol style="list-style-type: decimal"><li><p><strong>Load the Image</strong>: - Open the desired DICOM
series.</p></li>
<li><p><strong>Open Color Map Settings</strong>: - Go to
<code>Tools</code> &gt; <code>Color Maps Editor</code>.</p></li>
<li><p><strong>Apply and Adjust Color Map</strong>: - Choose a
predefined color map from the list. You might also create a customised
map. - Adjust the intensity and transparency settings as needed to
enhance the visualisation of the images.</p></li>
</ol></li>
</ul><figure><img src="../fig/itk-snap-layer-inspector-color-map-tab.png" alt="Figure. ITK-SNAP: Layer inspector with color map tab" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP: Layer inspector with color map
tab</div>
</figure><ul><li>
<strong>The info tab</strong> displays the Image Header information
for the images and also gives the Cursor Coordinates in both Voxel and
World units.
<ul><li>A dialog box will appear displaying metadata and other relevant
information about the loaded DICOM images (e.g. values for image header
and cursor coordinates).</li>
<li>If you look at the info tab for both the CT image and PET image you
will see that the header information for the images is different, and
the cursor coordinates in voxel units for the PET image are not whole
numbers.</li>
<li>This is because the displayed slices are from the main (CT) image,
and the overlaid (PET) image slices are interpolated at the
corresponding locations.</li>
</ul></li>
</ul><figure><img src="../fig/itk-snap-layer-inspector-info-tab.png" alt="Figure. ITK-SNAP: Layer inspector with info tab" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP: Layer inspector with info
tab</div>
</figure><ul><li>
<strong>The metadata tab</strong> contains (some of) the information
from the DICOM header of the images</li>
</ul><figure><img src="../fig/itk-snap-layer-inspector-metadata-tab.png" alt="Figure. ITK-SNAP: Layer inspector with metadata tab" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP: Layer inspector with metadata
tab</div>
</figure></div>
<div class="section level3">
<h3 id="converting-dicom-images-to-nifti">Converting DICOM images to NifTi<a class="anchor" aria-label="anchor" href="#converting-dicom-images-to-nifti"></a></h3>
<p>As mentioned earlier in the exercise, the NIfTI image format tends to
be much easier to work with when processing and analysing medical image
data. We will now work on converting DICOM images to a NIfTI image
volume.</p>
<div class="section level4">
<h4 id="using-itk-snap">Using ITK-SNAP<a class="anchor" aria-label="anchor" href="#using-itk-snap"></a></h4>
<p>In the ITK-SNAP application, save the file by clicking ‘File’ –&gt;
‘Save image’ –&gt; rename image and choose format as ‘NiFTI’.</p>
</div>
<div class="section level4">
<h4 id="using-dicom2nifti">Using <a href="https://github.com/icometrix/dicom2nifti" class="external-link">dicom2nifti</a>
<a class="anchor" aria-label="anchor" href="#using-dicom2nifti"></a></h4>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path </span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="im">import</span> dicom2nifti </span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>dicoms <span class="op">=</span> Path(<span class="st">"~/3_000000-CT_Lung_30_B31f-61322"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>dicom2nifti.convert_directory(dicoms, <span class="st">"."</span>, compression<span class="op">=</span><span class="va">True</span>, reorient<span class="op">=</span><span class="va">True</span>)</span></code></pre>
</div>
</div>
</div>
</section><section id="viewing-and-understanding-the-nifti-header-with-nibabel"><h2 class="section-heading">Viewing and understanding the NifTi header with NiBabel<a class="anchor" aria-label="anchor" href="#viewing-and-understanding-the-nifti-header-with-nibabel"></a>
</h2>
<hr class="half-width"><p>We are going to use the python package <a href="https://nipy.org/nibabel/" class="external-link">NiBabel</a> to work with
<code>NifTI</code> images. We recommend to check <a href="https://nipy.org/nibabel/#documentation" class="external-link">documentation</a> for
further deatils on using nibabel library. Please see <a href="_dependencies">instructions</a> to install such dependecies.</p>
<div class="section level3">
<h3 id="loading-images">Loading images<a class="anchor" aria-label="anchor" href="#loading-images"></a></h3>
<ol style="list-style-type: decimal"><li>Open terminal, activate <code>mirVE</code> environment and run
python</li>
</ol><div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">conda</span> activate mirVE</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">python</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>Run python commands under <code>*/episodes</code> path:</li>
</ol><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">import</span> nibabel <span class="im">as</span> nib</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>nii3ct <span class="op">=</span> nib.load(<span class="st">"data/3_ct_lung__30__b31f.nii.gz"</span>)</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>
<code>NifTI</code> file properties:</li>
</ol><div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(nii3ct))</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># &lt;class 'nibabel.nifti1.Nifti1Image'&gt;</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">print</span>(nii3ct.get_data_dtype())</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#int16</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>nii3ct.shape</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co"># (512, 512, 175)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>nii3ct.affine</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co">## dicom2nifti.convert_directory(dicoms, ".", compression=True, reorient=True) # nii.gz</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co">#array([[  -0.9765625 ,   -0.        ,    0.        ,  249.51171875],</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co">#       [  -0.        ,   -0.9765625 ,    0.        ,  466.01171875],</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">#       [   0.        ,    0.        ,    2.        , -553.5       ],</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#       [   0.        ,    0.        ,    0.        ,    1.        ]])</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">## dicom2nifti.convert_directory(dicoms, ".", compression=True, reorient=False) # nii.gz</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#array([[  -0.9765625 ,    0.        ,    0.        ,  249.51171875],</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="co">#       [  -0.        ,    0.9765625 ,    0.        ,  -33.01171875],</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co">#       [   0.        ,   -0.        ,    2.        , -553.5       ],</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="co">#       [   0.        ,    0.        ,    0.        ,    1.        ]])</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="header-features">Header features<a class="anchor" aria-label="anchor" href="#header-features"></a></h3>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">print</span>(nii3ct.header)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co">#&lt;class 'nibabel.nifti1.Nifti1Header'&gt; object, endian='&lt;'</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#sizeof_hdr      : 348</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co">#data_type       : b''</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#db_name         : b''</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#extents         : 0</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">#session_error   : 0</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#regular         : b''</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">#dim_info        : 0</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co">#dim             : [  3 512 512 175   1   1   1   1]</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#intent_p1       : 0.0</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co">#intent_p2       : 0.0</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co">#intent_p3       : 0.0</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co">#intent_code     : none</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="co">#datatype        : int16</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="co">#bitpix          : 16</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="co">#slice_start     : 0</span></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="co">#pixdim          : [-1.         0.9765625  0.9765625  2.         1.         1.</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="co">#  1.         1.       ]</span></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a><span class="co">#vox_offset      : 0.0</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a><span class="co">#scl_slope       : nan</span></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a><span class="co">#scl_inter       : nan</span></span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a><span class="co">#slice_end       : 0</span></span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a><span class="co">#slice_code      : unknown</span></span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a><span class="co">#xyzt_units      : 2</span></span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a><span class="co">#cal_max         : 0.0</span></span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a><span class="co">#cal_min         : 0.0</span></span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a><span class="co">#slice_duration  : 0.0</span></span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a><span class="co">#toffset         : 0.0</span></span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a><span class="co">#glmax           : 0</span></span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a><span class="co">#glmin           : 0</span></span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a><span class="co">#descrip         : b''</span></span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a><span class="co">#aux_file        : b''</span></span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a><span class="co">#qform_code      : unknown</span></span>
<span id="cb14-36"><a href="#cb14-36" tabindex="-1"></a><span class="co">#sform_code      : aligned</span></span>
<span id="cb14-37"><a href="#cb14-37" tabindex="-1"></a><span class="co">#quatern_b       : 0.0</span></span>
<span id="cb14-38"><a href="#cb14-38" tabindex="-1"></a><span class="co">#quatern_c       : 1.0</span></span>
<span id="cb14-39"><a href="#cb14-39" tabindex="-1"></a><span class="co">#quatern_d       : 0.0</span></span>
<span id="cb14-40"><a href="#cb14-40" tabindex="-1"></a><span class="co">#qoffset_x       : 249.51172</span></span>
<span id="cb14-41"><a href="#cb14-41" tabindex="-1"></a><span class="co">#qoffset_y       : -33.01172</span></span>
<span id="cb14-42"><a href="#cb14-42" tabindex="-1"></a><span class="co">#qoffset_z       : -553.5</span></span>
<span id="cb14-43"><a href="#cb14-43" tabindex="-1"></a><span class="co">#srow_x          : [ -0.9765625   0.          0.        249.51172  ]</span></span>
<span id="cb14-44"><a href="#cb14-44" tabindex="-1"></a><span class="co">#srow_y          : [ -0.          0.9765625   0.        -33.01172  ]</span></span>
<span id="cb14-45"><a href="#cb14-45" tabindex="-1"></a><span class="co">#srow_z          : [   0.    -0.     2.  -553.5]</span></span>
<span id="cb14-46"><a href="#cb14-46" tabindex="-1"></a><span class="co">#intent_name     : b''</span></span>
<span id="cb14-47"><a href="#cb14-47" tabindex="-1"></a><span class="co">#magic           : b'n+1'</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="qform">qform<a class="anchor" aria-label="anchor" href="#qform"></a></h3>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="bu">print</span>(nii3ct.get_qform())</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co">## dicom2nifti.convert_directory(dicoms, ".", compression=True, reorient=True) # nii.gz</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="co">#[[  -0.9765625     0.            0.          249.51171875]</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co"># [   0.            0.9765625     0.          -33.01171875]</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co"># [   0.            0.            2.         -553.5       ]</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co"># [   0.            0.            0.            1.        ]]</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">## dicom2nifti.convert_directory(dicoms, ".", compression=True, reorient=False) # nii.gz</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co">#[[  -0.9765625     0.            0.          249.51171875]</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="co"># [   0.           -0.9765625     0.          466.01171875]</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="co"># [   0.            0.            2.         -553.5       ]</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="co"># [   0.            0.            0.            1.        ]]</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="coordinate-system">coordinate system<a class="anchor" aria-label="anchor" href="#coordinate-system"></a></h3>
<p>The original DICOM images assume the world coordinate system is LPS
(i.e. values increase when moving to the left, posterior, and superior).
See this helpful information on <a href="https://nipy.org/nibabel/dicom/dicom_orientation.html" class="external-link">DICOM
orientations</a>, and determine if you obtained a similar affine
transform from the DICOM headers. The values in the first two rows
corresponding to the x and y dimensions would be the negative of those
in the NifTi header.</p>
</div>
<div class="section level3">
<h3 id="obtaining-image-pixel-data">Obtaining image pixel data<a class="anchor" aria-label="anchor" href="#obtaining-image-pixel-data"></a></h3>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>pixel_data<span class="op">=</span>nii3ct.get_fdata()</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="bu">print</span>(pixel_data.dtype, pixel_data.shape)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co">#float64 (512, 512, 175)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>plt.imshow(pixel_data[:,:,<span class="dv">140</span>], cmap<span class="op">=</span><span class="st">"gray"</span>)<span class="op">;</span> plt.show()</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co">#launch plot window</span></span></code></pre>
</div>
</div>
</section><section id="modifying-nifti-images-and-headers-with-nibabel"><h2 class="section-heading">Modifying <code>NifTi</code> images and headers with Nibabel<a class="anchor" aria-label="anchor" href="#modifying-nifti-images-and-headers-with-nibabel"></a>
</h2>
<hr class="half-width"><div class="section level3">
<h3 id="using-float64-data-type">Using float64 data type<a class="anchor" aria-label="anchor" href="#using-float64-data-type"></a></h3>
<ul><li>The image data for a Nifti1Image object can be accessed using the
<code>get_fdata</code> function. Loading the data from disk and cast it
to float64 type before returning the data as a numpy array.</li>
</ul><div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>image_data<span class="op">=</span>nii3ct.get_fdata()</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(image_data))</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co">#&lt;class 'numpy.ndarray'&gt;</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="bu">print</span>(image_data.dtype)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co">#float64</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="bu">print</span>(image_data.shape)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">#(512, 512, 175)</span></span></code></pre>
</div>
<ul><li>Use the <code>set_data_dtype</code> function to set the data type to
float32.</li>
</ul><p>Casting it to float64 prevents any integer-related errors and
problems in downstream processing when using the data read by Nibabel.
However, this does not change the type of the image stored on disk,
which as we have seen is int16 for this image, and this could still lead
to downstream errors or unexpected behaviour for any processing that
works directly on the images stored on disk. Therefore, we are going to
convert the image saved on disk to a floating point image. We are going
to use 32 bit rather than 64 bit floating point, as this is usually
sufficiently accurate.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="bu">print</span>(nii3ct.get_data_dtype())</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="co">#int16</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>nii3ct.set_data_dtype(np.float32)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="bu">print</span>(nii3ct.get_data_dtype())</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="co">#float32</span></span></code></pre>
</div>
<p>We are also going to set the qform to unknown as suggested above.
This also updates the corresponding fields in the header. Use the
<code>set_qform</code> function to set the <code>qform</code> code. To
just set the code and not modify the other <code>qform</code> values in
the header, the first input should be None. It is not necessary to
modify the other <code>qform</code> values as they should be ignored
when the code is set to unknown.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>nii3ct.set_qform(<span class="va">None</span>, code <span class="op">=</span> <span class="st">'unknown'</span>)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="bu">print</span>(nii3ct.header)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>...</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>qform_code      : unknown</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>...</span></code></pre>
</div>
<p>The floating point image can now be written to disk using the save
function.</p>
<p>Notes.</p>
<pre class="callout"><code>We do not need to manually modify the type of the image data – setting the data type for the Nifti1Image object tells it which type to use when writing the image data to disk.</code></pre>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>nib.save(nii3ct, <span class="st">'data/3_ct_lung__30__b31f_float32.nii.gz'</span>)</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="bit-integers-vs-32-bit-floats">16-bit integers vs 32 bit floats<a class="anchor" aria-label="anchor" href="#bit-integers-vs-32-bit-floats"></a></h3>
<p>The file size of <code>3_ct_lung__30__b31f_float32.nii.gz</code> is
larger than <code>3_ct_lung__30__b31f.nii.gz</code> (60 MB, 46 MB,
respectively) because of the conversion from 16 bit integers to 32 bit
floats. Both images are compressed, but the compression is more
efficient for the floating point image: while a 32-bit floating point
variable is twice the size of a 16-bit integer, the floating image is
less than double the size of the original integer image.</p>
<ul><li>int16</li>
</ul><div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>nii3ct_int16 <span class="op">=</span> nib.load(<span class="st">"data/3_ct_lung__30__b31f.nii.gz"</span>)</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="bu">print</span>(nii3ct_int16.get_data_dtype())</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="co">#int16</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="bu">print</span>(nii3ct_int16.header)</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="co">#&lt;class 'nibabel.nifti1.Nifti1Header'&gt; object, endian='&lt;'</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="co">#sizeof_hdr      : 348</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="co">#data_type       : b''</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="co">#db_name         : b''</span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="co">#extents         : 0</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="co">#session_error   : 0</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a><span class="co">#regular         : b''</span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a><span class="co">#dim_info        : 0</span></span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="co">#dim             : [  3 512 512 175   1   1   1   1]</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a><span class="co">#intent_p1       : 0.0</span></span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a><span class="co">#intent_p2       : 0.0</span></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a><span class="co">#intent_p3       : 0.0</span></span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a><span class="co">#intent_code     : none</span></span>
<span id="cb28-15"><a href="#cb28-15" tabindex="-1"></a><span class="co">#datatype        : int16</span></span>
<span id="cb28-16"><a href="#cb28-16" tabindex="-1"></a><span class="co">#bitpix          : 16</span></span>
<span id="cb28-17"><a href="#cb28-17" tabindex="-1"></a><span class="co">#...</span></span></code></pre>
</div>
<ul><li>float32</li>
</ul><div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>nii3ct_float32 <span class="op">=</span> nib.load(<span class="st">"data/3_ct_lung__30__b31f_float32.nii.gz"</span>)</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="bu">print</span>(nii3ct_float32.get_data_dtype())</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="co">#float32</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="bu">print</span>(nii3ct_float32.header)</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="co">#&lt;class 'nibabel.nifti1.Nifti1Header'&gt; object, endian='&lt;'</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="co">#sizeof_hdr      : 348</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co">#data_type       : b''</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="co">#db_name         : b''</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="co">#extents         : 0</span></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="co">#session_error   : 0</span></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="co">#regular         : b''</span></span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a><span class="co">#dim_info        : 0</span></span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a><span class="co">#dim             : [  3 512 512 175   1   1   1   1]</span></span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a><span class="co">#intent_p1       : 0.0</span></span>
<span id="cb31-12"><a href="#cb31-12" tabindex="-1"></a><span class="co">#intent_p2       : 0.0</span></span>
<span id="cb31-13"><a href="#cb31-13" tabindex="-1"></a><span class="co">#intent_p3       : 0.0</span></span>
<span id="cb31-14"><a href="#cb31-14" tabindex="-1"></a><span class="co">#intent_code     : none</span></span>
<span id="cb31-15"><a href="#cb31-15" tabindex="-1"></a><span class="co">#datatype        : float32</span></span>
<span id="cb31-16"><a href="#cb31-16" tabindex="-1"></a><span class="co">#bitpix          : 32</span></span>
<span id="cb31-17"><a href="#cb31-17" tabindex="-1"></a><span class="co">#slice_start     : 0</span></span>
<span id="cb31-18"><a href="#cb31-18" tabindex="-1"></a><span class="co">#...</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="cropping-data">Cropping data<a class="anchor" aria-label="anchor" href="#cropping-data"></a></h3>
<p>Cropping data might offen contain background voxels which can be
useful in some instances but might take up valuable RAM memory,
especially for large images.</p>
<ul><li>Read the image data from disk using <code>get_fdata</code> and then
create a new array containing a copy of the desired slices:</li>
</ul><div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>nii3ct_float32 <span class="op">=</span> nib.load(<span class="st">"data/3_ct_lung__30__b31f_float32.nii.gz"</span>)</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>nii3ct_float32.set_data_dtype(np.float32)</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="bu">print</span>(nii3ct_float32.get_data_dtype())</span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a><span class="co">#float32</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>image_data<span class="op">=</span>nii3ct_float32.get_fdata()</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="bu">print</span>(image_data.dtype, image_data.shape)</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="co">#float64 (512, 512, 175)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>plt.imshow(image_data[:,:,<span class="dv">100</span>], cmap<span class="op">=</span><span class="st">"gray"</span>)<span class="op">;</span> plt.show()</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="co">#launch plot window</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>image_data_cropped <span class="op">=</span> image_data[<span class="dv">103</span>:<span class="dv">381</span>,<span class="dv">160</span>:<span class="dv">340</span>,:].copy()</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="co">#x[sagittal], y[coronal], z[axial] #voxel units</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>nii3ct_float32_cropped <span class="op">=</span> nib.nifti1.Nifti1Image(image_data_cropped, nii3ct_float32.get_sform(), nii3ct_float32.header)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>nii3ct_float32_cropped.shape</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="co">#(278, 180, 175)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="bu">print</span>(nii3ct_float32_cropped.header)</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="co">#&lt;class 'nibabel.nifti1.Nifti1Header'&gt; object, endian='&lt;'</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="co">#sizeof_hdr      : 348</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a><span class="co">#data_type       : b''</span></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="co">#db_name         : b''</span></span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a><span class="co">#extents         : 0</span></span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a><span class="co">#session_error   : 0</span></span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a><span class="co">#regular         : b''</span></span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a><span class="co">#dim_info        : 0</span></span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a><span class="co">#dim             : [  3 278 180 175   1   1   1   1]</span></span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a><span class="co">#intent_p1       : 0.0</span></span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a><span class="co">#intent_p2       : 0.0</span></span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a><span class="co">#intent_p3       : 0.0</span></span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a><span class="co">#intent_code     : none</span></span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a><span class="co">#datatype        : float32</span></span>
<span id="cb37-16"><a href="#cb37-16" tabindex="-1"></a><span class="co">#bitpix          : 32</span></span>
<span id="cb37-17"><a href="#cb37-17" tabindex="-1"></a><span class="co">#slice_start     : 0</span></span>
<span id="cb37-18"><a href="#cb37-18" tabindex="-1"></a><span class="co">#pixdim          : [1.        0.9765625 0.9765625 2.        1.        1.        1.</span></span>
<span id="cb37-19"><a href="#cb37-19" tabindex="-1"></a><span class="co"># 1.       ]</span></span>
<span id="cb37-20"><a href="#cb37-20" tabindex="-1"></a><span class="co">#vox_offset      : 0.0</span></span>
<span id="cb37-21"><a href="#cb37-21" tabindex="-1"></a><span class="co">#scl_slope       : nan</span></span>
<span id="cb37-22"><a href="#cb37-22" tabindex="-1"></a><span class="co">#scl_inter       : nan</span></span>
<span id="cb37-23"><a href="#cb37-23" tabindex="-1"></a><span class="co">#slice_end       : 0</span></span>
<span id="cb37-24"><a href="#cb37-24" tabindex="-1"></a><span class="co">#slice_code      : unknown</span></span>
<span id="cb37-25"><a href="#cb37-25" tabindex="-1"></a><span class="co">#xyzt_units      : 2</span></span>
<span id="cb37-26"><a href="#cb37-26" tabindex="-1"></a><span class="co">#cal_max         : 0.0</span></span>
<span id="cb37-27"><a href="#cb37-27" tabindex="-1"></a><span class="co">#cal_min         : 0.0</span></span>
<span id="cb37-28"><a href="#cb37-28" tabindex="-1"></a><span class="co">#slice_duration  : 0.0</span></span>
<span id="cb37-29"><a href="#cb37-29" tabindex="-1"></a><span class="co">#toffset         : 0.0</span></span>
<span id="cb37-30"><a href="#cb37-30" tabindex="-1"></a><span class="co">#glmax           : 0</span></span>
<span id="cb37-31"><a href="#cb37-31" tabindex="-1"></a><span class="co">#glmin           : 0</span></span>
<span id="cb37-32"><a href="#cb37-32" tabindex="-1"></a><span class="co">#descrip         : b''</span></span>
<span id="cb37-33"><a href="#cb37-33" tabindex="-1"></a><span class="co">#aux_file        : b''</span></span>
<span id="cb37-34"><a href="#cb37-34" tabindex="-1"></a><span class="co">#qform_code      : unknown</span></span>
<span id="cb37-35"><a href="#cb37-35" tabindex="-1"></a><span class="co">#sform_code      : aligned</span></span>
<span id="cb37-36"><a href="#cb37-36" tabindex="-1"></a><span class="co">#quatern_b       : 0.0</span></span>
<span id="cb37-37"><a href="#cb37-37" tabindex="-1"></a><span class="co">#quatern_c       : 0.0</span></span>
<span id="cb37-38"><a href="#cb37-38" tabindex="-1"></a><span class="co">#quatern_d       : 1.0</span></span>
<span id="cb37-39"><a href="#cb37-39" tabindex="-1"></a><span class="co">#qoffset_x       : 249.51172</span></span>
<span id="cb37-40"><a href="#cb37-40" tabindex="-1"></a><span class="co">#qoffset_y       : 466.01172</span></span>
<span id="cb37-41"><a href="#cb37-41" tabindex="-1"></a><span class="co">#qoffset_z       : -553.5</span></span>
<span id="cb37-42"><a href="#cb37-42" tabindex="-1"></a><span class="co">#srow_x          : [ -0.9765625  -0.          0.        249.51172  ]</span></span>
<span id="cb37-43"><a href="#cb37-43" tabindex="-1"></a><span class="co">#srow_y          : [ -0.         -0.9765625   0.        466.01172  ]</span></span>
<span id="cb37-44"><a href="#cb37-44" tabindex="-1"></a><span class="co">#srow_z          : [   0.     0.     2.  -553.5]</span></span>
<span id="cb37-45"><a href="#cb37-45" tabindex="-1"></a><span class="co">#intent_name     : b''</span></span>
<span id="cb37-46"><a href="#cb37-46" tabindex="-1"></a><span class="co">#magic           : b'n+1'</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>nib.save(nii3ct_float32_cropped, <span class="st">"data/3_ct_lung__30__b31f_float32_cropped.nii.gz"</span>)</span></code></pre>
</div>
<ul><li>Setting world coordinates of voxel (103, 160, 0) in the uncropped
image.</li>
</ul><div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>cropped_origin <span class="op">=</span> nii3ct_float32.affine<span class="op">@</span>np.array([<span class="dv">103</span>,<span class="dv">160</span>,<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>cropped_origin</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="co">#array([ 148.92578125,  309.76171875, -553.5       ,    1.        ])</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>aff_mat_cropped <span class="op">=</span> nii3ct_float32_cropped.get_sform()</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="bu">print</span>(aff_mat_cropped)</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="co">#array([[  -0.9765625 ,   -0.        ,    0.        ,  249.51171875],</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a><span class="co">#       [  -0.        ,   -0.9765625 ,    0.        ,  466.01171875],</span></span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a><span class="co">#       [   0.        ,    0.        ,    2.        , -553.5       ],</span></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a><span class="co">#       [   0.        ,    0.        ,    0.        ,    1.        ]])</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>aff_mat_cropped[:, <span class="dv">3</span>] <span class="op">=</span> cropped_origin</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="bu">print</span>(aff_mat_cropped)</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a><span class="co">#[[  -0.9765625    -0.            0.          148.92578125]</span></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="co"># [  -0.           -0.9765625     0.          309.76171875]</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a><span class="co"># [   0.            0.            2.         -553.5       ]</span></span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a><span class="co"># [   0.            0.            0.            1.        ]]</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>nii3ct_float32_cropped.set_sform(aff_mat_cropped)</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>nii3ct_float32_cropped.affine</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a><span class="co">#array([[  -0.9765625 ,   -0.        ,    0.        ,  148.92578125],</span></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a><span class="co">#       [  -0.        ,   -0.9765625 ,    0.        ,  309.76171875],</span></span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="co">#       [   0.        ,    0.        ,    2.        , -553.5       ],</span></span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a><span class="co">#       [   0.        ,    0.        ,    0.        ,    1.        ]])</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>nib.save(nii3ct_float32_cropped, <span class="st">"data/3_ct_lung__30__b31f_float32_cropped_affine.nii.gz"</span>)</span></code></pre>
</div>
<ul><li>updating the affine transforms with <code>nibabel.slicer</code>
</li>
</ul><div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>nii3ct_float32_cropped_with_nibabel_slicer <span class="op">=</span> nii3ct_float32.slicer[<span class="dv">103</span>:<span class="dv">381</span>,<span class="dv">160</span>:<span class="dv">340</span>,:]</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>nii3ct_float32_cropped_with_nibabel_slicer.affine</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="co">#array([[  -0.9765625 ,    0.        ,    0.        ,  148.92578125],</span></span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="co">#       [   0.        ,   -0.9765625 ,    0.        ,  309.76171875],</span></span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a><span class="co">#       [   0.        ,    0.        ,    2.        , -553.5       ],</span></span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a><span class="co">#       [   0.        ,    0.        ,    0.        ,    1.        ]])</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="cropped-and-aligned-image">Cropped and aligned image<a class="anchor" aria-label="anchor" href="#cropped-and-aligned-image"></a></h3>
<p>Automated image registrations can be prone to be failure if there are
very large initial differences between the images. A manual alignment is
subjective, but can provide a good enough starting guess that keeps the
objective, automated registration more reliable.<br>
* Manually aligning images For manaual image registration in ITK-SNAP go
to Tools &gt; image registration</p>
<figure><img src="../fig/itk-snap-image-manual-registration.png" alt="Figure. ITK-SNAP main window" class="figure mx-auto d-block"><div class="figcaption">Figure. ITK-SNAP main window</div>
</figure><ul><li>Automatic registration (affine) You can use <a href="https://nipype.readthedocs.io/en/latest/api/generated/nipype.interfaces.niftyreg.reg.html" class="external-link">niftyreg</a>,
<a href="http://cmictig.cs.ucl.ac.uk/wiki/index.php/Reg_aladin" class="external-link">Reg_aladin</a>
or <a href="https://github.com/Project-MONAI/tutorials/tree/main/3d_registration" class="external-link">DL
methods</a>.</li>
</ul></div>
</section><section id="references"><h2 class="section-heading">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<hr class="half-width"><ul><li>NiBabel: “The NiBabel documentation also contains some useful
information and tutorials for working with NifTi images and
understanding world coordinate systems and radiological vs neurological
view.”
<ul><li>
<a href="https://nipy.org/nibabel/nifti_images.html" class="external-link uri">https://nipy.org/nibabel/nifti_images.html</a><br></li>
<li>
<a href="https://nipy.org/nibabel/coordinate_systems.html" class="external-link uri">https://nipy.org/nibabel/coordinate_systems.html</a><br></li>
<li>
<a href="https://nipy.org/nibabel/neuro_radio_conventions.html" class="external-link uri">https://nipy.org/nibabel/neuro_radio_conventions.html</a><br></li>
</ul></li>
<li>ITK-SNAP:
<ul><li><a href="http://www.itksnap.org/docs/viewtutorial.php" class="external-link">Tutorial:
Getting Started with ITK-SnAP</a></li>
<li><a href="http://itksnap.org/files/handout_201409.pdf" class="external-link">ITK-SNAP 3.x
Training Class Final Program</a></li>
</ul></li>
</ul><!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 --></section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/excthreesteps.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="../instructor/excthreesteps.html" rel="next">
          Next: Demons Image... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/HealthBioscienceIDEAS/Medical-Image-Registration-Short-Course/edit/main/episodes/itksnap.Rmd" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/HealthBioscienceIDEAS/Medical-Image-Registration-Short-Course/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/HealthBioscienceIDEAS/Medical-Image-Registration-Short-Course/" class="external-link">Source</a></p>
				<p><a href="https://github.com/HealthBioscienceIDEAS/Medical-Image-Registration-Short-Course/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/HealthBioscienceIDEAS/sandpaper/tree/IDEAS" class="external-link">sandpaper (0.16.5.9000)</a>, <a href="https://github.com/carpentries/pegboard/tree/a32a7836d4455f407c3cafe8ab95edc636e5e919" class="external-link">pegboard (0.7.5)</a>, and <a href="https://github.com/HealthBioscienceIDEAS/varnish/tree/IDEAS" class="external-link">varnish (1.0.3.9000)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://HealthBioscienceIDEAS.github.io/Medical-Image-Registration-Short-Course/instructor/itksnap.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "A Practical Introduction to Working with Medical Image Data",
  "creativeWorkStatus": "active",
  "url": "https://HealthBioscienceIDEAS.github.io/Medical-Image-Registration-Short-Course/instructor/itksnap.html",
  "identifier": "https://HealthBioscienceIDEAS.github.io/Medical-Image-Registration-Short-Course/instructor/itksnap.html",
  "dateCreated": "2024-05-13",
  "dateModified": "2024-06-18",
  "datePublished": "2024-06-18"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

